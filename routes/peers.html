<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="javascripts/peer.min.js"></script>
</head>
<body>
<input id="peerId" value="asd" type="text">
<button onclick="connect()"></button>

</body>
<script>
    var peerOptions = {
        host: 'localhost',
        port: 9000,
        path: 'peer-portal',
        debug: 3,
        config: {'iceServers': [
            { url: 'stun:stun.l.google.com:19302' },
            { url: 'turn:anuradha@192.248.8.242:3478', username: 'anuradha', credential: 'sanjeewa' }
        ]}
    };
    var peer = new Peer(peerOptions);

    console.log('starting');

    peer.on('open', function (id) {
        console.log('My peer ID is: ' + id);
    });
    var connection;

    peer.on('connection', function(conn) {
//        connection = conn;
        console.log('connection started')
        conn.on('data', function(data) {
            console.log('Received', data);
        });
    });


    function connect() {
        var otherId = document.getElementById('peerId').value;
        var conn = peer.connect(otherId);
        connection = conn;

        conn.on('open', function() {
            // Receive messages
            conn.on('data', function(data) {
                console.log('Received', data);
            });

            // Send messages
//            setTimeout(function() {
//                conn.send('Hello!');
//            }, 5000);
        });
    }
</script>
</html>